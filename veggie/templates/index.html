{% extends 'base.html' %}

{% block title %}Swapora - Skill Exchange Redefined{% endblock %}

{% block start %}
<!-- Hero Section with Enhanced Animation -->
<div class="hero-section position-relative" style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); overflow: hidden;">
    <div class="container py-5 position-relative text-center text-lg-start">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6 position-relative z-3">
                <h1 class="display-3 fw-bold text-white mb-4 animate_animated animatefadeInDown animate_slow">Swap Skills, Empower Potential</h1>
                <p class="lead text-white-50 mb-4 animate_animated animatefadeIn animate_slow" style="animation-delay: 0.5s;">Join a thriving community of students sharing skills, resources, and creativity to grow together. Collaborate, connect, and achieve without limits.</p>
                {% if not request.user.is_authenticated %}
                    <div class="d-flex gap-3 animate_animated animatefadeInUp animate_slow" style="animation-delay: 1s;">
                        <a href="{% url 'login' %}" class="btn btn-primary btn-lg px-5 rounded-pill shadow-lg pulse-animation">Get Started</a>
                        <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-5 rounded-pill pulse-animation">Join Now</a>
                    </div>
                {% else %}
                    <a href="{% url 'recipes' %}" class="btn btn-primary btn-lg px-5 rounded-pill animate_animated animatefadeInUp animate_slow" style="animation-delay: 1s;">Share Your Skills</a>
                {% endif %}
            </div>
            <div class="col-lg-6 text-center d-none d-lg-block position-relative">
                <div class="hero-image-wrapper">
                    <img src="https://document360.com/wp-content/uploads/2022/11/knowledge_transfer.jpg" alt="Skill Exchange" class="img-fluid hero-image animate_animated animatezoomIn animate_slow floating-animation rounded-circle">
                </div>
            </div>
            <div class="hero-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
            </div>
        </div>
    </div>
</div>

<!-- Featured Exchanges Section -->
<section class="py-5 bg-light position-relative overflow-hidden featured-exchanges">
    <div class="container position-relative z-3">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold animate_animated animate_fadeInLeft">Explore Recent Exchanges</h2>
            <a href="{% url 'recipes' %}" class="btn btn-outline-primary animate_animated animate_fadeInRight">View All</a>
        </div>
        <div class="row g-4 exchange-grid">
            {% for recipe in featured_recipes %}
            <div class="col-md-6 col-lg-4">
                <div class="card exchange-card h-100 shadow-lg border-0 position-relative overflow-hidden animate_animated animate_zoomIn">
                    <div class="card-overlay"></div>
                    <div class="exchange-badge position-absolute top-0 end-0 m-3">
                        <span class="badge bg-primary">Popular</span>
                    </div>
                    
                    {% if recipe.recipe_image %}
                        <div class="card-img-container">
                            <img src="/media/{{recipe.recipe_image}}" class="card-img-top" style="height: 250px; object-fit: cover;" alt="{{recipe.recipe_name}}">
                        </div>
                    {% else %}
                        <div class="bg-gradient text-center py-5 text-white d-flex align-items-center justify-content-center">
                            <i class="fas fa-exchange-alt fa-4x opacity-75"></i>
                        </div>
                    {% endif %}
                    
                    <div class="card-body position-relative z-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title fw-bold mb-0">{{recipe.recipe_name}}</h5>
                            <button class="btn btn-outline-danger btn-sm favs" data-recipe-id="{{recipe.id}}">
                                {% if recipe in user_favorites %}❤{% else %}♡{% endif %}
                            </button>
                        </div>
                        <p class="text-muted small mb-3">{{recipe.recipe_des|truncatechars:100}}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="user-info d-flex align-items-center">
                                <img src="https://ui-avatars.com/api/?name={{recipe.user.username}}&background=random&color=fff" 
                                     class="rounded-circle me-2" style="width: 32px; height: 32px;">
                                <small class="text-muted">{{recipe.user.username}}</small>
                            </div>
                            <a href="#" class="btn btn-sm btn-outline-primary">Explore</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="section-overlay"></div>
</section>

<!-- Skill Categories Section -->
<section class="py-5 position-relative">
    <div class="container text-center position-relative z-3">
        <h2 class="fw-bold mb-4 animate_animated animate_fadeInDown">Discover Skill Categories</h2>
        <div class="row g-4">
            {% for category in categories %}
            <div class="col-6 col-md-4 col-lg-3">
                <a href="{% url 'category' category.slug %}" class="text-decoration-none">
                    <div class="card h-100 border-0 shadow-sm text-center category-card animate_animated animate_fadeInUp">
                        <div class="card-body">
                            <img src="/media/{{category.icon}}" alt="{{category.name}}" class="mb-3 category-icon" style="width: 64px; height: 64px;">
                            <h5 class="card-title text-dark">{{category.name}}</h5>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="category-overlay"></div>
</section>

<!-- Join Community Section -->
<section class="bg-primary text-white py-5 position-relative overflow-hidden">
    <div class="container text-center position-relative z-3">
        <h2 class="fw-bold mb-4 animate_animated animatepulse animate_repeat-2">Build Your Network</h2>
        <p class="lead mb-4 animate_animated animate_fadeIn">Connect with fellow students, share your unique skills, and grow together as a community.</p>
        {% if not request.user.is_authenticated %}
            <a href="{% url 'register' %}" class="btn btn-light btn-lg px-5 rounded-pill join-btn animate_animated animate_rubberBand">Join Now</a>
        {% endif %}
    </div>
    <div class="community-shapes">
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
    </div>
</section>

<style>
    
    /* Enhanced Animations and Background Effects */
    :root {
        --primary-gradient: linear-gradient(45deg, #6a11cb, #2575fc);
        --secondary-gradient: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%);
    }

    body {
        overflow-x: hidden;
    }

    /* Hero Section Improvements */
    .hero-section {
        position: relative;
        clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
    }

    .hero-image-wrapper {
        perspective: 1000px;
    }

    .hero-image {
        transition: all 0.5s ease;
        transform-style: preserve-3d;
    }

    .hero-image:hover {
        transform: scale(1.05) rotateY(10deg);
    }

    /* Floating and Pulse Animations */
    @keyframes floating {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
    }

    .floating-animation {
        animation: floating 4s ease-in-out infinite;
    }

    @keyframes pulse-effect {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .pulse-animation {
        animation: pulse-effect 2s infinite;
    }

    /* Background Shapes */
    .hero-shapes .shape {
        position: absolute;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
    }

    .hero-shapes .shape-1 {
        top: 10%;
        left: 5%;
        width: 200px;
        height: 200px;
        animation: move-shape-1 10s infinite alternate;
    }

    .hero-shapes .shape-2 {
        top: 60%;
        right: 10%;
        width: 150px;
        height: 150px;
        animation: move-shape-2 8s infinite alternate;
    }

    .hero-shapes .shape-3 {
        bottom: -50px;
        left: 50%;
        width: 300px;
        height: 300px;
        background: rgba(255,255,255,0.05);
    }

    @keyframes move-shape-1 {
        to { transform: translateY(50px) rotate(45deg); }
    }

    @keyframes move-shape-2 {
        to { transform: translateX(-50px) rotate(-45deg); }
    }

    /* Card and Category Enhancements */
    .recipe-card, .category-card {
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    .recipe-card:hover, .category-card:hover {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }

    .category-icon {
        transition: transform 0.3s ease;
    }

    .category-card:hover .category-icon {
        transform: rotate(360deg) scale(1.2);
    }

    /* Section Overlays */
    .section-overlay, .category-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.05);
        z-index: 1;
    }

    /* Community Section Shapes */
    .community-shapes .shape {
        position: absolute;
        background: rgba(255,255,255,0.05);
        border-radius: 50%;
    }

    .community-shapes .shape-4 {
        top: -50px;
        right: 10%;
        width: 200px;
        height: 200px;
    }

    .community-shapes .shape-5 {
        bottom: -50px;
        left: 10%;
        width: 150px;
        height: 150px;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const favsButtons = document.querySelectorAll('.favs');
    favsButtons.forEach(button => {
        button.addEventListener('click', function() {
            this.innerHTML = this.innerHTML === '♡' ? '❤' : '♡';
        });
    });
});
</script>
{% endblock %}